<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> • RFate</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RFate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fab fa fab fa-pagelines"></span>
     
    FATE-HD
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li>
      <a href="../articles/fate-hd_tutorial_0_publications.html">Publications</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_0_modelling_framework.html">Modelling framework</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_1_PFG.html">a. Build PFG</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_2_RUN_SIMULATION.html">b. Run a FATE-HD simulation</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_3_MODULES.html">c. Use a FATE-HD module</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-toolbox"></span>
     
    RFate
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li>
      <a href="../articles/rfate_tutorial_1_PFG.html">
        <span class="fa fa-battery-quarter"></span>
         
        Build PFG
      </a>
    </li>
    <li>
      <a href="../articles/rfate_tutorial_2_params.html">
        <span class="fa fa-battery-half"></span>
         
        Build parameter files
      </a>
    </li>
    <li>
      <a href="../articles/rfate_tutorial_3_graphics.html">
        <span class="fa fa-battery-three-quarters"></span>
         
        Evaluate simulation
      </a>
    </li>
    <li class="divider">
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book fa-lg"></span>
     
    Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/fate-hd_tutorial_0_modelling_framework.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_0_publications.html">FATE-HD tutorial 0 - Publications</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_1_PFG.html">FATE-HD tutorial 1 - Build PFG</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_2_RUN_SIMULATION.html">FATE-HD tutorial 2 - Run a simulation</a>
    </li>
    <li>
      <a href="../articles/fate-hd_tutorial_3_MODULES.html">FATE-HD tutorial 3 - Use a module</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../archive/RFate_0.1.0.9000.tar.gz">
    <span class="fa fa-rocket fa-lg"></span>
     
    Download Current Version
  </a>
</li>
<li>
  <a href="https://github.com/MayaGueguen/RFate.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1></h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MayaGueguen/RFate.git/blob/master/vignettes/fate-hd_tutorial_0_modelling_framework.Rmd"><code>vignettes/fate-hd_tutorial_0_modelling_framework.Rmd</code></a></small>
      <div class="hidden name"><code>fate-hd_tutorial_0_modelling_framework.Rmd</code></div>

    </div>

    
    
<p><br><br></p>
<p>For more details, please check <a href="papers/Boulangeat_2014_GCB.pdf" title="Boulangeat, I., Georges, D., Thuiller, W., FATE-HD: A spatially and temporally explicit integrated model for predicting vegetation structure and diversity at regional scale. Global Change Biology, 20, 2368–2378.">Boulangeat, 2014</a> or the <a href="https://mayagueguen.github.io/FATE-WEBSITE/publications.html">Publications page</a>.</p>
<p><br><br></p>
<div id="global-view" class="section level2">
<h2 class="hasAnchor">
<a href="#global-view" class="anchor"></a>Global view</h2>
<p><br></p>
<div id="conceptual-diagram-of-fate-hd" class="section level3">
<h3 class="hasAnchor">
<a href="#conceptual-diagram-of-fate-hd" class="anchor"></a>Conceptual diagram of <code>FATE-HD</code>
</h3>
<p>The whole area is divided in grid-cells in which an independent <strong>succession model A)</strong> regulates the PFG life cycle. PFG abundances are structured by age into cohorts and each cohort is attributed to a height stratum according to the growth parameters.</p>
<p>Four submodels affect this cycle at various levels :</p>
<p><strong>B) Shading</strong> regulates interactions between cohorts affecting germination, recruitment and survival.</p>
<p><strong>C) Habitat suitability</strong> affects the recruitment and fecundity rates.</p>
<p><strong>D) The seed dispersal model</strong> makes <code>FATE-HD</code> spatially explicit by connecting grid-cells.<br>
It depends on the amount of seeds produced by mature plants and affects each PFG’s seed bank in each cell.</p>
<p><strong>E) Disturbances</strong> affect PFG survival and fecundity.</p>
<p><br></p>
<p><img src="pictures/FATE_loop_1.png" alt="Global scheme" style="width:800px;"></p>
<p><br><br></p>
</div>
<div id="life-cycle-of-each-pfg-within-fate-hd-and-influences-from-sub-models" class="section level3">
<h3 class="hasAnchor">
<a href="#life-cycle-of-each-pfg-within-fate-hd-and-influences-from-sub-models" class="anchor"></a>Life cycle of each PFG within <code>FATE-HD</code> and influences from sub-models</h3>
<p>Only three age classes are considered : germinant, juvenile and mature.</p>
<p>The <strong>recruitment</strong> is influenced by the habitat suitability and the biotic interactions.</p>
<p><strong>Mortality</strong> occurs when light or soil conditions are not favorable or when the PFG completes its life span.</p>
<p>In addition, the disturbance regime directly affects juvenile or mature PFG and may for instance result in PFG death, impede <strong>seed production</strong> by reducing mature PFG age to N-1, or <strong>revitalize senescents</strong> by reducing their age to M-1.</p>
<p><br></p>
<p><img src="pictures/FATE_loop_3.png" alt="Internal loop" style="width:800px;"></p>
<p><br><br><br></p>
</div>
</div>
<div id="source-code" class="section level2">
<h2 class="hasAnchor">
<a href="#source-code" class="anchor"></a>Source code</h2>
<p><br></p>
<div id="class-diagram" class="section level3">
<h3 class="hasAnchor">
<a href="#class-diagram" class="anchor"></a>Class diagram</h3>
<p>A <code>FATE-HD</code> simulation is based on a map whose pixels each contain a succession model (<code>SuFate</code>). This model can depend or not on habitat suitability (<code>SuFateH</code>).</p>
<p>All the pixels are linked together by the dispersal model (<code>Disp</code>).</p>
<p>Input parameters are given to the software via the simulation parameter file (<code>FilesOfParameters</code>) which contain global (<code>GlobalSimulParameters</code>) and PFG related parameters as well as maps. All of these informations are read and included into the model using templates for parameters (<code>Params</code>), constants (<code>FGutils</code>) and rasters (<code>Spatial</code>).</p>
<p><br></p>
<p><img src="pictures/FATE_loop_4.png" alt="Class diagram" style="width:800px;"></p>
<p><br><br></p>
</div>
<div id="structural-equations" class="section level3">
<h3 class="hasAnchor">
<a href="#structural-equations" class="anchor"></a>Structural equations</h3>
<p><br></p>
<div id="life-cycle" class="section level4">
<h4 class="hasAnchor">
<a href="#life-cycle" class="anchor"></a>Life cycle</h4>
<p><br></p>
<p>The succession model within <code>FATE-HD</code> describes the PFG demography with 5 processes :</p>
<ul>
<li>germination</li>
<li>recruitment</li>
<li>growth</li>
<li>survival</li>
<li>fecundity</li>
</ul>
<p>Below are detailed these different steps, in the order in which they are executed within the model.<br>
All the <code>getEnv...()</code> functions represent the influence of the habitat suitability if the <code>SuFateh</code> model is selected. These functions return either 1 or 0 depending if the habitat within the pixel is suitable or not for the considered PFG. They will influence of specific process, like mortality, recruitment or fecundity.</p>
<p><br></p>
<ol style="list-style-type: decimal">
<li>
<strong>Lifespan :</strong><br>
In theory, the lifetime of a species could be influenced by the environment.<br>
Currently, habitat or not, <span class="math inline">\(getEnvMort() = 1\)</span>.</li>
</ol>
<p><span class="math display">\[LifeSpan * getEnvMort()\]</span> <br></p>
<ol start="2" style="list-style-type: decimal">
<li>
<strong>Maturation time :</strong><br>
The time at which a PFG is able to produce seeds can also be influenced by its habitat, in a negative way.<br>
If it is the case (<code>SuFateh</code> model selected), then <span class="math inline">\(maturation = LifeSpan\)</span>.<br>
Which means there will be no fecundity, and then no seeds produced.</li>
</ol>
<p><span class="math display">\[\begin{align}
maturation &amp;= (LifeSpan - Maturity) * (1.0 - getEnvGrowth()) + Maturity \\
maturation &amp;= ceil(maturation)
\end{align}\]</span></p>
<p><br></p>
<ol start="3" style="list-style-type: decimal">
<li>
<strong>Germination rate :</strong><br>
The number of seeds available as well as the resource level in stratum 0 (which represents the enforced dormancy) allow to determine the proportion of seeds that will germinate.</li>
</ol>
<p><span class="math display">\[GerminationRate = AvailSeeds * \frac{MaxRecruitment}{100}\]</span> with <span class="math inline">\(MaxRecruitment = getMaxRecruit(\text{strata 0}) =\)</span> proportion of seeds that can germinate.</p>
<p><br></p>
<ol start="4" style="list-style-type: decimal">
<li>
<strong>Recruitment rate :</strong><br>
The establishment of the seeds that are able to germinate then depends on the ability of those germinants to withstand the conditions within stratum 0. If the habitat is not favorable, then the recruitment is null.</li>
</ol>
<p><span class="math display">\[\begin{align}
&amp;\text{if ( } abund &lt; 10 * MaxAbund \text{ )} \\
&amp;\{ \\
&amp; RecruitmentRate = 1.0 * GerminationRate * (\frac{MaxAbund}{LifeSpan - Maturity}) * getEnvRecrRate() \\
&amp;\}
\end{align}\]</span></p>
<p>with <span class="math inline">\(MaxAbund \in {1,2,3}\)</span> and representing the maximum shade a PFG can produce in a pixel (i.e. similar to a number of individuals), proportionally to the number of strata it can occupy, taller PFG producing naturally more shade.</p>
<p>The condition <span class="math inline">\(abund &lt; 10 * MaxAbund\)</span> helps regulate populations : new individuals only grow if there is no too many individuals yet within the pixel.</p>
<p><br></p>
<ol start="5" style="list-style-type: decimal">
<li>
<strong>Mature abundance :</strong><br>
The number of mature individuals (i.e. whose age is between maturity and lifetime) is corrected by the maximum capacity of each PFG (<span class="math inline">\(MaxAbund\)</span>) within each stratum.</li>
</ol>
<p><span class="math display">\[MatureAbund = \frac{getAbundBetween(maturation, LifeSpan)}{\frac{MaxAbund}{nbStrata}}\]</span> <br></p>
<ol start="6" style="list-style-type: decimal">
<li>
<strong>Fecundity :</strong><br>
The new number of seeds that will be produced is also affected by the habitat. If the habitat is not favorable, then the fecundity is null and no seeds are produced.</li>
</ol>
<p><span class="math display">\[fecundity = min(1, MatureAbund) * PotentialFecund * getEnvFecund()\]</span> with <span class="math inline">\(PotentialFecund = 100\)</span>.</p>
<p><br><br></p>
</div>
<div id="code-specificities" class="section level4">
<h4 class="hasAnchor">
<a href="#code-specificities" class="anchor"></a>!! Code specificities !!</h4>
<p><br></p>
<ul>
<li>
<strong>Save raster abundances :</strong><br>
The fraction must be <span class="math inline">\(&gt; 1\)</span>, meaning <span class="math inline">\(totalNumAbund(pfg, stratum)\)</span> must be <span class="math inline">\(&gt; GLOBAL\_HIGH\_ABUND\)</span>.</li>
</ul>
<p><span class="math display">\[\begin{align}
Abund &amp;= 10,000 * \frac{totalNumAbund(pfg, stratum)}{GLOBAL\_HIGH\_ABUND} \\
Abund &amp;= min(10,000, Abund)
\end{align}\]</span></p>
<p><br></p>
<ul>
<li><strong>Light of strata :</strong></li>
</ul>
<p><span class="math display">\[ImmSize * CohortSize * AgeRange\]</span> with AgeRange = old - young, brkStra - young, old - MatAge, MatAge - young</p>
<p><br></p>
<ul>
<li>
<strong>Simplify legions :</strong><br>
Round abundances to save space, by setting size to :</li>
</ul>
<p><span class="math display">\[min(MAX\_BY\_COHORT, \frac{size(pfg, cohort) + 5000}{10,000} * 10,000)\]</span></p>
<p><br></p>
<ul>
<li><strong>Set light resources :</strong></li>
</ul>
<p><span class="math display">\[\begin{align}
&amp;\text{if ( } abund &lt; GLOBAL\_MEDIUM\_RESOURCES\_TRESH \text{ )} \\
&amp;\{ \\
&amp; light = HIGH \\
&amp;\} \text{ else if ( } abund &lt; GLOBAL\_LOW\_RESOURCES\_TRESH \text{ )} \\
&amp;\{ \\
&amp; light = MEDIUM \\
&amp;\} \text{ else} \\
&amp;\{ \\
&amp; light = LOW \\
&amp;\}
\end{align}\]</span></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#global-view">Global view</a></li>
      <li><a href="#source-code">Source code</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Maya Guéguen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
